/*! jq.multiinput * Version: 1.0.0 * Build date: 2019-03-11 */
!function(h,t,e,s){var a="multiInput",n={input:!1,clearInputs:1,limit:3,separator:"\n",inputSeparator:"||",trimSeparator:!1,onElementAdd:null,onElementRemove:null,json:!1,i18n:{limitMessage:"Limit reached",addText:"Add",removeText:"Remove"}};function p(t,e){this.options=h.extend({},n,e),this.$el=h(t),this.element=this.options.element?this.options.element:h(t),this.elementId=this.element.attr("id"),this.elementInput=this.options.input?this.options.input:h("<input>").attr({name:this.elementId+"Input",id:this.elementId+"Input",type:"text"}),this.elementInputs=null,this.elementCount=0,this.addLink=h("<a>").addClass("add").css("cursor","pointer").html('<i class="fa fa-lg fa-plus-circle"></i><span class="sr-only">'+this.options.i18n.addText+"</span>"),this.removeLink=h("<a></i>").addClass("remove").css("cursor","pointer").html('<i class="fa fa-lg fa-minus-circle"></i><span class="sr-only">'+this.options.i18n.removeText+"</span>"),this.escSeparator=this.options.separator.replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&"),this.escInputSeparator=this.options.inputSeparator.replace(/[\-\[\]\/{}()*+?.\\^$|]/g,"\\$&"),this.trimEx=new RegExp("^("+this.escSeparator+")+|("+this.escSeparator+")+$","gm"),this.trimExInput=new RegExp("^("+this.escInputSeparator+")+|("+this.escInputSeparator+")+$","gm"),this.init()}p.prototype={init:function(){var t=this;return t.element.length&&(t.elementInputs=t.fillElementsValues(t.element),t.element.hide().before(t.elementInputs)),this},clearInputs:function(t){h(":input",t).each(function(){switch(h(this).attr("type")){case"button":case"reset":case"submit":break;case"checkbox":case"radio":h(this).attr("checked",!1);break;default:h(this).val("")}}),this.saveElementsValues()},createElement:function(n,t,e){var i=this,s=n.clone(!1),a=h("<div>").addClass("inputWrapper").hide().append(s);if(h("[id]",a).each(function(){h(this).attr("id",h(this).attr("id")+t)}),this.options.json||h("[name]",a).each(function(){h(this).attr("name",h(this).attr("name")+t)}),h(".number",s).text(t+1),i.clearInputs(a),i.options.json)p=e;else var p=e.split(i.options.inputSeparator);var r=h(":input",a);if(i.options.json)h.each(p,function(t,e){h("[name="+t+"]",a).val(e)});else if(p.length)for(var o=0;o<p.length;o++)h(r[o]).val(p[o]);var l=i.addLink.clone(!1).click(function(t){if(t.preventDefault(),i.elementCount<i.options.limit){var e=i.createElement(i.elementInput,i.elementCount,""),n=h(this).parents(".inputWrapper").index();h(".number",e).text(n+2),h(this).parents(".inputWrapper").after(e),h(this).parents(".inputWrapper").nextAll(".inputWrapper").each(function(t){h(this).find(".number").text(n+t+2)}),e.show(0,function(){h(this).removeAttr("style")}),i.elementCount++,i.addElementEvents(e),i.saveElementsValues()}else alert(i.options.i18n.limitMessage)}),u=i.removeLink.clone(!1).click(function(t){if(t.preventDefault(),1<h(".inputWrapper",i.elementInputs).length){var e=h(this).parents(".inputWrapper").index();h(this).parents(".inputWrapper").nextAll(".inputWrapper").each(function(t){h(this).find(".number").text(e+t+1)}),h(this).parents(".inputWrapper").hide(0,function(){h(this).remove(),i.saveElementsValues(),i.elementCount--})}else i.clearInputs(h(this).parent());"function"==typeof i.options.onElementRemove&&i.options.onElementRemove(n,i)});return a.append(l).append(u),a},fillElementsValues:function(t){var e,n=this,i=t.attr("id");e=n.options.json?t.html()?JSON.parse(t.html()):[]:t.html().replace(/[\s\r\n]+$/,"").split(n.options.separator);var s,a=t.hasClass("required")?"required":"",p=h("<div>").attr("id",i+"Inputs").addClass("multiInput");if(e.length)for(var r=0;r<e.length;r++)s=n.createElement(n.elementInput,r,e[r]).addClass(i+"Input").addClass(a).show(),p.append(s),n.elementCount++,n.addElementEvents(s);else s=n.createElement(n.elementInput,0,"").addClass(i+"Input").show(),p.append(s),n.elementCount++,n.addElementEvents(s);return p},addElementEvents:function(t){var e=this;h("[name]",t).bind("change keyup mouseup",function(){return e.saveElementsValues(),!1}),"function"==typeof e.options.onElementAdd&&e.options.onElementAdd(t,e)},saveElementsValues:function(){var n=this;if(n.elementInputs){var t=n.elementInputs.children(".inputWrapper"),i=[];if(t.each(function(){var t=h(":input",h(this)),e=n.options.json?{}:[];h.each(t,function(){var t=h(this).attr("name");t&&n.options.json?e[t]=h(this).val():e.push(h(this).val())}),n.options.json||(e=e.join(n.options.inputSeparator),n.options.trimSeparator&&(e=e.replace(n.trimExInput,""))),i.push(e)}),n.options.json)n.element.text(JSON.stringify(i).replace(/\[\[/,"[ [").replace(/]]/,"] ]"));else{var e=i.join(n.options.separator);n.options.trimSeparator&&(e=e.replace(n.trimEx,"")),n.element.text(e)}}}},h.fn[a]=function(e){var n,i=arguments;return e===s||"object"==typeof e?this.each(function(){h.data(this,"plugin_"+a)||h.data(this,"plugin_"+a,new p(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=h.data(this,"plugin_"+a);t instanceof p&&"function"==typeof t[e]&&(n=t[e].apply(t,Array.prototype.slice.call(i,1))),"destroy"===e&&h.data(this,"plugin_"+a,null)}),n!==s?n:this):void 0}}(jQuery,window,document);